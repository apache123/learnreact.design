<h2 id="why-postcss-cssnext-what-is-the-difference-with-cssnext">Why <strong>postcss-cssnext</strong>? What is the difference with <strong>cssnext</strong>?</h2>

<h3 id="short-answer-postcss">Short answer: PostCSS</h3>

<p>If you’re using <a href="https://github.com/postcss/postcss">PostCSS</a>
in your build process, and were using <code class="highlighter-rouge">cssnext</code>,
you can quickly switch to only <code class="highlighter-rouge">postcss-cssnext</code>
(check the <a href="#migration">Migration</a> section here below).</p>

<h3 id="wait-what-is-postcss">Wait? What is PostCSS?</h3>

<p>cssnext was at first designed to be a complete tool, before PostCSS became
popular; thus, includes some options that don’t really belong in a PostCSS
plugin focused on the future of CSS
(e.g., <code class="highlighter-rouge">import</code>, <code class="highlighter-rouge">url</code>, <code class="highlighter-rouge">compress</code>, <code class="highlighter-rouge">plugins</code>…) .</p>

<p>These days, most people use <a href="https://github.com/postcss/postcss">PostCSS</a>
directly (so they can easily adjust and choose their CSS transformations)
so we decided to make integration and of cssnext more simple by providing a
simple (real) plugin.</p>

<p>Also, having to maintain severals cssnext and PostCSS runners that does almost
the same is not optimal.</p>

<h3 id="migration">Migration</h3>

<p>If you were using cssnext with some options here is what you need to know:</p>

<h4 id="options">Options</h4>

<h5 id="options-import-url-compress-messages">Options <code class="highlighter-rouge">import</code>, <code class="highlighter-rouge">url</code>, <code class="highlighter-rouge">compress</code>, <code class="highlighter-rouge">messages</code></h5>

<ul>
  <li><code class="highlighter-rouge">import</code> options is just
<a href="https://github.com/postcss/postcss-import"><code class="highlighter-rouge">postcss-import</code></a></li>
  <li><code class="highlighter-rouge">url</code> option is just
<a href="https://github.com/postcss/postcss-url"><code class="highlighter-rouge">postcss-url</code></a></li>
  <li><code class="highlighter-rouge">compress</code> option is just
<a href="https://github.com/ben-eb/cssnano"><code class="highlighter-rouge">cssnano</code></a></li>
  <li><code class="highlighter-rouge">messages</code>: was a combination of
<a href="https://github.com/postcss/postcss-reporter"><code class="highlighter-rouge">postcss-reporter</code></a>
and
<a href="https://github.com/postcss/postcss-browser-reporter"><code class="highlighter-rouge">postcss-browser-reporter</code></a>.
Just pick up the one you want (or both).</li>
</ul>

<h5 id="option-plugins">Option <code class="highlighter-rouge">plugins</code></h5>

<p>Just add the plugins directly in your PostCSS list.</p>

<h5 id="options-sourcemap-map-to-from">Options <code class="highlighter-rouge">sourcemap</code>, <code class="highlighter-rouge">map</code>, <code class="highlighter-rouge">to</code>, <code class="highlighter-rouge">from</code></h5>

<p>These options were just proxy to <a href="https://github.com/postcss/postcss/blob/master/docs/source-maps.md">PostCSS source map options</a>.</p>

<h4 id="examples">Examples</h4>

<p>If you were using cssnext with default options, you might just need this:</p>

<div class="language-console highlighter-rouge"><span class="w">$ </span><span class="nc">npm</span><span class="kv"> uninstall cssnext [--save[-dev]]
</span><span class="w">$ </span><span class="nc">npm</span><span class="kv"> install postcss postcss-import postcss-url postcss-cssnext postcss-browser-reporter postcss-reporter [--save[-dev]]
</span></div>

<p>With the previous lines you might think that you are going backward by having a
more complex boilerplate. But if you look carefully, you will notice that you
might not be interested by some options.</p>

<p>Now that you have the appropriate plugins, here are some examples with some runners
and previous default cssnext behavior.</p>

<h5 id="postcss-cli"><a href="https://www.npmjs.com/package/postcss-cli">postcss-cli</a></h5>

<div class="language-console highlighter-rouge"><span class="w">$ </span><span class="nc">npm</span><span class="kv"> install postcss-cli --save-dev
</span></div>

<p>Here is an example of the json config you might use with something like
<code class="highlighter-rouge">$ postcss -c postcss.config.json</code>.</p>

<div class="language-js highlighter-rouge"><span class="p">{</span>
  <span class="s2">"use"</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">"postcss-import"</span><span class="p">,</span>
    <span class="s2">"postcss-url"</span><span class="p">,</span>
    <span class="s2">"postcss-cssnext"</span><span class="p">,</span>
    <span class="c1">// add your "plugins" here</span>
    <span class="c1">// ...</span>
    <span class="c1">// and if you want to compress</span>
    <span class="c1">// "cssnano",</span>
    <span class="s2">"postcss-browser-reporter"</span><span class="p">,</span>
    <span class="s2">"postcss-reporter"</span>
  <span class="p">]</span>
<span class="p">}</span>
</div>

<h5 id="grunt-postcss"><a href="https://www.npmjs.com/package/grunt-postcss">grunt-postcss</a></h5>

<div class="language-console highlighter-rouge"><span class="w">$ </span><span class="nc">npm</span><span class="kv"> uninstall grunt-cssnext --save-dev
</span><span class="w">$ </span><span class="nc">npm</span><span class="kv"> install grunt-postcss --save-dev
</span></div>

<div class="language-js highlighter-rouge"><span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
  <span class="na">postcss</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">options</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">processors</span><span class="p">:</span> <span class="p">[</span>
        <span class="nx">require</span><span class="p">(</span><span class="s2">"postcss-import"</span><span class="p">)(),</span>
        <span class="nx">require</span><span class="p">(</span><span class="s2">"postcss-url"</span><span class="p">)(),</span>
        <span class="nx">require</span><span class="p">(</span><span class="s2">"postcss-cssnext"</span><span class="p">)(),</span>
        <span class="c1">// add your "plugins" here</span>
        <span class="c1">// ...</span>
        <span class="c1">// and if you want to compress</span>
        <span class="c1">// Disable autoprefixer, because it's already included in cssnext</span>
        <span class="c1">// require("cssnano")({ autoprefixer: false }),</span>
        <span class="nx">require</span><span class="p">(</span><span class="s2">"postcss-browser-reporter"</span><span class="p">)(),</span>
        <span class="nx">require</span><span class="p">(</span><span class="s2">"postcss-reporter"</span><span class="p">)(),</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="na">dist</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">src</span><span class="p">:</span> <span class="s1">'css/*.css'</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
</div>

<h5 id="gulp-postcss"><a href="https://www.npmjs.com/package/gulp-postcss">gulp-postcss</a></h5>

<div class="language-console highlighter-rouge"><span class="w">$ </span><span class="nc">npm</span><span class="kv"> uninstall gulp-cssnext --save-dev
</span><span class="w">$ </span><span class="nc">npm</span><span class="kv"> install gulp-postcss --save-dev
</span></div>

<div class="language-js highlighter-rouge"><span class="kd">var</span> <span class="nx">gulp</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'gulp'</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">postcss</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'gulp-postcss'</span><span class="p">)</span>

<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">'css'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="s1">'./src/*.css'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">postcss</span><span class="p">([</span>
      <span class="nx">require</span><span class="p">(</span><span class="s2">"postcss-import"</span><span class="p">)(),</span>
      <span class="nx">require</span><span class="p">(</span><span class="s2">"postcss-url"</span><span class="p">)(),</span>
      <span class="nx">require</span><span class="p">(</span><span class="s2">"postcss-cssnext"</span><span class="p">)(),</span>
      <span class="c1">// add your "plugins" here</span>
      <span class="c1">// ...</span>
      <span class="c1">// and if you want to compress</span>
      <span class="c1">// Disable autoprefixer, because it's already included in cssnext</span>
      <span class="c1">// require("cssnano")({ autoprefixer: false }),</span>
      <span class="nx">require</span><span class="p">(</span><span class="s2">"postcss-browser-reporter"</span><span class="p">)(),</span>
      <span class="nx">require</span><span class="p">(</span><span class="s2">"postcss-reporter"</span><span class="p">)(),</span>
    <span class="p">]))</span>
    <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s1">'./dest'</span><span class="p">))</span>
  <span class="p">)</span>
<span class="p">})</span>
</div>

<h5 id="postcss-loader"><a href="https://www.npmjs.com/package/postcss-loader">postcss-loader</a></h5>

<div class="language-console highlighter-rouge"><span class="w">$ </span><span class="nc">npm</span><span class="kv"> uninstall cssnext-loader --save-dev
</span><span class="w">$ </span><span class="nc">npm</span><span class="kv"> install postcss-loader --save-dev
</span></div>

<div class="language-js highlighter-rouge"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">module</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">loaders</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
          <span class="na">test</span><span class="p">:</span>   <span class="sr">/</span><span class="se">\.</span><span class="sr">css$/</span><span class="p">,</span>
          <span class="na">loader</span><span class="p">:</span> <span class="s2">"style-loader!css-loader!postcss-loader"</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="na">postcss</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">webpack</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span>
      <span class="nx">require</span><span class="p">(</span><span class="s2">"postcss-import"</span><span class="p">)({</span> <span class="na">addDependencyTo</span><span class="p">:</span> <span class="nx">webpack</span> <span class="p">}),</span>
      <span class="nx">require</span><span class="p">(</span><span class="s2">"postcss-url"</span><span class="p">)(),</span>
      <span class="nx">require</span><span class="p">(</span><span class="s2">"postcss-cssnext"</span><span class="p">)(),</span>
      <span class="c1">// add your "plugins" here</span>
      <span class="c1">// ...</span>
      <span class="c1">// and if you want to compress,</span>
      <span class="c1">// just use css-loader option that already use cssnano under the hood</span>
      <span class="nx">require</span><span class="p">(</span><span class="s2">"postcss-browser-reporter"</span><span class="p">)(),</span>
      <span class="nx">require</span><span class="p">(</span><span class="s2">"postcss-reporter"</span><span class="p">)(),</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</div>

<p><strong>With those examples, you got it.
Feel free to adjust the configuration with the appropriate
<a href="/setup/#usage">PostCSS runner</a>.</strong></p>
